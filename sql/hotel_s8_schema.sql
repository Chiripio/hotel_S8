-- ============================================================
-- Script de respaldo estructural del proyecto HOTEL_S8
-- Ingeniería de Software (PRY3211) - Semana 8
-- Descripción: Estructura de tablas y datos base del sistema de reservas
-- ============================================================

CREATE TABLE HABITACION (
    ID              NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TIPO            VARCHAR2(50) NOT NULL,
    CAPACIDAD       NUMBER(2) NOT NULL,
    PRECIO_NOCHE    NUMBER(10,2) NOT NULL
);

CREATE TABLE RESERVA (
    ID              NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    HABITACION_ID   NUMBER NOT NULL,
    FECHA_ENTRADA   DATE NOT NULL,
    FECHA_SALIDA    DATE NOT NULL,
    NOMBRE          VARCHAR2(100) NOT NULL,
    EMAIL           VARCHAR2(100),
    CONSTRAINT FK_RESERVA_HABITACION FOREIGN KEY (HABITACION_ID)
        REFERENCES HABITACION(ID)
);

INSERT INTO HABITACION (TIPO, CAPACIDAD, PRECIO_NOCHE) VALUES ('Single', 1, 45000);
INSERT INTO HABITACION (TIPO, CAPACIDAD, PRECIO_NOCHE) VALUES ('Doble', 2, 65000);
INSERT INTO HABITACION (TIPO, CAPACIDAD, PRECIO_NOCHE) VALUES ('Familiar', 4, 99000);

INSERT INTO RESERVA (HABITACION_ID, FECHA_ENTRADA, FECHA_SALIDA, NOMBRE, EMAIL)
VALUES (2, TO_DATE('2025-10-10','YYYY-MM-DD'), TO_DATE('2025-10-22','YYYY-MM-DD'), 'Juan Pérez', 'juan@example.com');

COMMIT;
